Version 4
SHEET 1 4720 2468
WIRE -832 -384 -1072 -384
WIRE -1072 -320 -1072 -384
WIRE -1072 -320 -1264 -320
WIRE -2368 -304 -2432 -304
WIRE -1264 -304 -1264 -320
WIRE -2432 -288 -2432 -304
WIRE -2368 -288 -2368 -304
WIRE -1072 -256 -1072 -320
WIRE -1008 -256 -1072 -256
WIRE -832 -240 -832 -384
WIRE -832 -240 -944 -240
WIRE -768 -240 -832 -240
WIRE -624 -240 -688 -240
WIRE -464 -240 -624 -240
WIRE -1376 -224 -1440 -224
WIRE -1264 -224 -1264 -240
WIRE -1264 -224 -1296 -224
WIRE -1216 -224 -1264 -224
WIRE -1120 -224 -1136 -224
WIRE -1056 -224 -1120 -224
WIRE -1008 -224 -1056 -224
WIRE -1056 -208 -1056 -224
WIRE -1440 -176 -1440 -224
WIRE -2432 -160 -2432 -208
WIRE -1120 -128 -1120 -160
WIRE -1056 -128 -1120 -128
WIRE -2432 -112 -2432 -160
WIRE -2432 -112 -2576 -112
WIRE -1056 -112 -1056 -128
WIRE -2576 -96 -2576 -112
WIRE -2304 -80 -2496 -80
WIRE -2432 -64 -2432 -112
WIRE -2496 -48 -2496 -80
WIRE -2464 -48 -2496 -48
WIRE -2304 -32 -2304 -80
WIRE -2304 -32 -2400 -32
WIRE -2224 -32 -2304 -32
WIRE -2464 -16 -2576 -16
WIRE -464 32 -464 -240
WIRE -432 32 -464 32
WIRE -112 32 -144 32
WIRE 0 32 -32 32
WIRE -2576 80 -2576 64
WIRE -1056 80 -1200 80
WIRE -880 80 -1056 80
WIRE -1200 128 -1200 80
WIRE -176 160 -208 160
WIRE -144 160 -144 32
WIRE -144 160 -176 160
WIRE -112 160 -144 160
WIRE 0 160 0 32
WIRE 0 160 -32 160
WIRE 32 160 0 160
WIRE 32 176 32 160
WIRE -1056 208 -1056 80
WIRE -1024 208 -1056 208
WIRE -880 208 -880 80
WIRE -752 208 -880 208
WIRE -592 208 -672 208
WIRE -464 208 -464 32
WIRE -464 208 -592 208
WIRE -880 224 -880 208
WIRE -880 224 -960 224
WIRE 896 224 848 224
WIRE 1056 224 896 224
WIRE -1440 240 -1440 -112
WIRE -1296 240 -1440 240
WIRE -1200 240 -1200 208
WIRE -1200 240 -1232 240
WIRE -1168 240 -1200 240
WIRE -1072 240 -1104 240
WIRE -1024 240 -1072 240
WIRE -1072 256 -1072 240
WIRE 896 272 896 224
WIRE -176 288 -176 160
WIRE -144 288 -176 288
WIRE 32 304 32 256
WIRE 32 304 -80 304
WIRE 96 304 32 304
WIRE 176 304 96 304
WIRE -144 320 -192 320
WIRE 1056 320 1056 224
WIRE -192 336 -192 320
WIRE -2144 352 -2176 352
WIRE -2032 352 -2064 352
WIRE 896 368 896 352
WIRE 992 368 896 368
WIRE -2112 400 -2128 400
WIRE -2128 432 -2128 400
WIRE -2336 448 -2352 448
WIRE -2288 448 -2336 448
WIRE -2176 448 -2176 352
WIRE -2176 448 -2208 448
WIRE -2160 448 -2176 448
WIRE -720 448 -992 448
WIRE -2032 464 -2032 352
WIRE -2032 464 -2096 464
WIRE -1888 464 -2032 464
WIRE 896 464 896 432
WIRE 896 464 816 464
WIRE 1056 464 1056 416
WIRE 1216 464 1056 464
WIRE -2352 480 -2352 448
WIRE -2160 480 -2192 480
WIRE -1440 480 -1440 240
WIRE -1440 480 -1472 480
WIRE -2192 496 -2192 480
WIRE 896 496 896 464
WIRE 1216 496 1216 464
WIRE -1888 512 -1888 464
WIRE -992 512 -992 448
WIRE -992 512 -1184 512
WIRE 1056 512 1056 464
WIRE 1216 512 1216 496
WIRE -1184 528 -1184 512
WIRE -2128 560 -2128 496
WIRE 992 560 896 560
WIRE -992 576 -992 512
WIRE -928 576 -992 576
WIRE 896 576 896 560
WIRE -2352 592 -2352 560
WIRE -720 592 -720 448
WIRE -720 592 -864 592
WIRE -688 592 -720 592
WIRE -560 592 -608 592
WIRE -464 592 -464 208
WIRE -464 592 -560 592
WIRE -1440 608 -1440 480
WIRE -1296 608 -1440 608
WIRE -1184 608 -1184 592
WIRE -1184 608 -1216 608
WIRE -1136 608 -1184 608
WIRE -976 608 -1056 608
WIRE -928 608 -976 608
WIRE -976 624 -976 608
WIRE 1216 624 1216 592
WIRE 896 688 896 656
WIRE 976 688 896 688
WIRE 1056 688 1056 608
WIRE 1056 688 976 688
WIRE -2352 704 -2352 672
WIRE -2080 704 -2352 704
WIRE -1888 704 -1888 592
WIRE -1888 704 -2080 704
WIRE 976 704 976 688
WIRE -976 720 -976 688
FLAG -2080 704 0
FLAG -2128 560 0
FLAG -2432 0 0
FLAG -2368 -288 0
FLAG -2576 80 0
FLAG -2224 -32 VRT_GND
IOPIN -2224 -32 BiDir
FLAG -2192 496 VRT_GND
IOPIN -2192 496 BiDir
FLAG -2432 -160 VCC
IOPIN -2432 -160 BiDir
FLAG -2112 400 VCC
IOPIN -2112 400 BiDir
FLAG -1888 464 BUFFER_OUT
FLAG -2336 448 Vin
IOPIN -2336 448 In
FLAG 176 304 SUMOUT
IOPIN 176 304 BiDir
FLAG 816 464 SUMOUT
IOPIN 816 464 BiDir
FLAG 848 224 VCC
IOPIN 848 224 BiDir
FLAG 1216 624 VRT_GND
IOPIN 1216 624 BiDir
FLAG 976 704 0
FLAG 1216 496 SPK
FLAG -896 560 VCC
IOPIN -896 560 BiDir
FLAG -896 624 0
FLAG -1472 480 BUFFER_OUT
IOPIN -1472 480 BiDir
FLAG -992 192 VCC
IOPIN -992 192 BiDir
FLAG -992 256 0
FLAG -976 720 VRT_GND
IOPIN -976 720 BiDir
FLAG -1072 336 VRT_GND
IOPIN -1072 336 BiDir
FLAG -112 272 VCC
IOPIN -112 272 BiDir
FLAG -112 336 0
FLAG -192 336 VRT_GND
IOPIN -192 336 BiDir
FLAG -976 -272 VCC
IOPIN -976 -272 BiDir
FLAG -976 -208 0
FLAG -1056 -112 VRT_GND
IOPIN -1056 -112 BiDir
FLAG -624 -160 VRT_GND
IOPIN -624 -160 BiDir
FLAG -592 288 VRT_GND
IOPIN -592 288 BiDir
FLAG -560 672 VRT_GND
IOPIN -560 672 BiDir
FLAG -208 160 FILTOUT
IOPIN -208 160 BiDir
FLAG -432 32 FILTOUT
IOPIN -432 32 BiDir
FLAG 96 384 0
SYMBOL Opamps\\opamp2 -2128 400 R0
SYMATTR InstName U1
SYMATTR Value TLC081
SYMBOL voltage -2352 464 R0
WINDOW 3 -56 44 Left 2
WINDOW 123 -56 44 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -56 16 Left 2
SYMATTR Value PULSE(-1V 1V 0 0.01u 0.01u 2ms 4ms)
SYMATTR InstName vin
SYMBOL res -2192 432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res -2048 336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 2k
SYMBOL res -1872 608 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL voltage -2432 -192 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName VCC
SYMATTR Value {VCC}
SYMBOL Opamps\\opamp2 -2432 -96 R0
SYMATTR InstName U2
SYMATTR Value TLC081
SYMBOL res -2592 -112 R0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res -2592 -32 R0
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL npn 992 320 R0
SYMATTR InstName Q4_npn
SYMATTR Value Qtip31
SYMBOL pnp 992 608 M180
SYMATTR InstName Q5_pnp
SYMATTR Value Qtip32
SYMBOL diode 880 368 R0
WINDOW 0 38 12 Left 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode 880 496 R0
WINDOW 3 29 48 Left 2
SYMATTR Value 1N4148
SYMATTR InstName D4
SYMBOL res 1200 496 R0
SYMATTR InstName SPEAKER
SYMATTR Value 32
SYMBOL voltage -2352 576 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 4.5V
SYMBOL res 880 560 R0
SYMATTR InstName R15
SYMATTR Value 100
SYMBOL res 880 256 R0
SYMATTR InstName R17
SYMATTR Value 100
SYMBOL Opamps\\opamp2 -896 528 R0
SYMATTR InstName U7
SYMATTR Value TLC081
SYMBOL Opamps\\opamp2 -992 160 R0
SYMATTR InstName U9
SYMATTR Value TLC081
SYMBOL cap -1232 224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 68n
SYMBOL cap -1104 224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 68n
SYMBOL res -1216 112 R0
SYMATTR InstName R14
SYMATTR Value 2.9k
SYMBOL res -1088 240 R0
SYMATTR InstName R16
SYMATTR Value 2.9k
SYMBOL res -1200 592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 2.9k
SYMBOL res -1040 592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 2.9k
SYMBOL cap -1200 528 R0
SYMATTR InstName C6
SYMATTR Value 68n
SYMBOL cap -992 624 R0
SYMATTR InstName C7
SYMATTR Value 68n
SYMBOL res -592 576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RLP
SYMATTR Value 1k
SYMBOL Opamps\\opamp2 -112 240 R0
SYMATTR InstName U10
SYMATTR Value TLC081
SYMBOL res -128 176 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName Rvol
SYMATTR Value 10k
SYMBOL Opamps\\opamp2 -976 -304 R0
SYMATTR InstName U11
SYMATTR Value TLC081
SYMBOL res -1280 -240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R38
SYMATTR Value 2.9k
SYMBOL res -1120 -240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R39
SYMATTR Value 2.9k
SYMBOL cap -1280 -304 R0
SYMATTR InstName C12
SYMATTR Value 68n
SYMBOL res -672 -256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RBP
SYMATTR Value 5k
SYMBOL res -1072 -224 R0
SYMATTR InstName R42
SYMATTR Value 2.9k
SYMBOL cap -1136 -224 R0
SYMATTR InstName C13
SYMATTR Value 68n
SYMBOL cap -1456 -176 R0
SYMATTR InstName C14
SYMATTR Value 68n
SYMBOL res -656 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RHP
SYMATTR Value 5k
SYMBOL res -640 -256 R0
SYMATTR InstName R6
SYMATTR Value 5k
SYMBOL res -608 192 R0
SYMATTR InstName R7
SYMATTR Value 5k
SYMBOL res -576 576 R0
SYMATTR InstName R8
SYMATTR Value 5k
SYMBOL res 80 288 R0
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL res -16 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 2.2k
SYMBOL res 16 160 R0
SYMATTR InstName ROV
SYMATTR Value 1k
TEXT -2752 624 Left 2 !.PARAMS VCC=9V OFFS=VCC/2
TEXT -2752 568 Left 2 !.tran {SWEEP}\n.PARAMS SWEEP=3s
TEXT 672 152 Left 2 ;Power Amplifier (Class AB)
TEXT 1744 8 Left 2 !**************************************\n*      Model Generated by MODPEX     *\n*Copyright(c) Symmetry Design Systems*\n*         All Rights Reserved        *\n*    UNPUBLISHED LICENSED SOFTWARE   *\n*   Contains Proprietary Information *\n*      Which is The Property of      *\n*     SYMMETRY OR ITS LICENSORS      *\n*    Modeling services provided by   *\n* Interface Technologies www.i-t.com *\n**************************************\n.MODEL Qtip32 pnp\n+IS=1e-09 BF=134.366 NF=1.29961 VAF=10\n+IKF=0.742988 ISE=1e-16 NE=1.40014 BR=0.1\n+NR=1.46599 VAR=100 IKR=3.21978 ISC=1e-16\n+NC=2.71657 RB=7.44433 IRB=2.41268 RBM=0.218936\n+RE=0.0152284 RC=0.0761421 XTB=0.1 XTI=1\n+EG=1.05 CJE=3.26474e-10 VJE=0.446178 MJE=0.464223\n+TF=1e-08 XTF=3.50642 VTF=8.2848 ITF=0.0305862\n+CJC=3.07595e-10 VJC=0.77548 MJC=0.476497 XCJC=0.799334\n+FC=0.8 CJS=0 VJS=0.75 MJS=0.5\n+TR=9.57121e-06 PTF=0 KF=0 AF=1\n* Model generated on Feb  8, 2004\n* Model format: PSpice
TEXT 1752 -760 Left 2 !**************************************\n*      Model Generated by MODPEX     *\n*Copyright(c) Symmetry Design Systems*\n*         All Rights Reserved        *\n*    UNPUBLISHED LICENSED SOFTWARE   *\n*   Contains Proprietary Information *\n*      Which is The Property of      *\n*     SYMMETRY OR ITS LICENSORS      *\n*    Modeling services provided by   *\n* Interface Technologies www.i-t.com *\n**************************************\n.MODEL Qtip31 npn\n+IS=1e-09 BF=3656.16 NF=1.23899 VAF=10\n+IKF=0.0333653 ISE=1e-08 NE=2.29374 BR=0.1\n+NR=1.5 VAR=100 IKR=0.333653 ISC=1e-08\n+NC=1.75728 RB=6.15083 IRB=100 RBM=0.00113049\n+RE=0.0001 RC=0.0491489 XTB=50 XTI=1\n+EG=1.05 CJE=3.26475e-10 VJE=0.446174 MJE=0.464221\n+TF=2.06218e-09 XTF=15.0842 VTF=25.7317 ITF=0.001\n+CJC=3.07593e-10 VJC=0.775484 MJC=0.476498 XCJC=0.750493\n+FC=0.796407 CJS=0 VJS=0.75 MJS=0.5\n+TR=9.57121e-06 PTF=0 KF=0 AF=1\n* Model generated on Feb  8, 2004\n* Model format: PSpice
TEXT -2256 192 Right 2 ;*********Buffer Stage *********\n200 mV input, centered around 4.5 V\ntest.wav contains +/- 200mV wave file\ncontaining an equal-tempered frequency\nsweep from 120 Hz to 1.2kHz.\nThe signal is distorted to mimic noise
TEXT 2736 -784 Left 2 !*   DEVICE = TLC081\n\n*\n\n*   Rev. A      TLC081 operational amplifier "macromodel" subcircuit\n\n*                                               created using Parts release 8.0 on 12/17/99 at 15:28\n\n*                                               Parts is a MicroSim product.\n\n*\n\n*   Rev. B      22 August 2003 By Neil Albaugh: ADDED HEADER TEXT & EDITED MODEL \n\n*                                               FROM TLC081_12V_CMOS.lib\n\n*\n\n* connections: non-inverting input\n\n*              | inverting input\n\n*              | | positive power supply\n\n*              | | | negative power supply\n\n*              | | | | output\n\n*              | | | | |\n\n.subckt TLC081 1 2 3 4 5\n\n*\n\n  c1   11 12 4.2895E-12\n\n  c2    6  7 8.0000E-12\n\n  css  10 99 635.76E-15\n\n  dc    5 53 dy\n\n  de   54  5 dy\n\n  dlp  90 91 dx\n\n  dln  92 90 dx\n\n  dp    4  3 dx\n\n  egnd 99  0 poly(2) (3,0) (4,0) 0 .5 .5\n\n  fb    7 99 poly(5) vb vc ve vlp vln 0 23.969E6 -1E3 1E3 24E6 -24E6\n\n  ga    6  0 11 12 417.20E-6\n\n  gcm   0  6 10 99 499.29E-9\n\n  iss   3 10 dc 130.40E-6\n\n  hlim 90  0 vlim 1K\n\n  j1   11  2 10 jx1\n\n  j2   12  1 10 jx2\n\n  r2    6  9 100.00E3\n\n  rd1   4 11 2.3969E3\n\n  rd2   4 12 2.3969E3\n\n  ro1   8  5 10\n\n  ro2   7 99 10\n\n  rp    3  4 6.0581E3\n\n  rss  10 99 1.5337E6\n\n  vb    9  0 dc 0\n\n  vc    3 53 dc 1.4999\n\n  ve   54  4 dc .85993\n\n  vlim  7  8 dc 0\n\n  vlp  91  0 dc 220\n\n  vln   0 92 dc 220\n\n.model dx D(Is=800.00E-18)\n\n.model dy D(Is=800.00E-18 Rs=1m Cjo=10p)\n\n.model jx1 PJF(Is=5.0000E-15 Beta=1.3348E-3 Vto=-1)\n\n.model jx2 PJF(Is=5.0000E-15 Beta=1.3348E-3 Vto=-1)\n\n.ends\n\n* END MODEL TLC081
TEXT -2280 -280 Left 2 ;**************Virtual Ground**************\nDue to design constraints, the synthesizer\nworks off a single 9V power supply. This\nvirtual ground circuit splits the 9V signal\nso that the amplified audio signal can be\ncentered at 4.5V
TEXT -2704 448 Left 2 ;wavefile="c:/test.wav" chan=0
TEXT -2744 744 Left 2 !.MEAS AC tmp max mag(V(BPF_OUT))\n.MEAS AC maxv when mag(V(BPF_OUT))=(tmp*.9999)\n.MEAS AC meas_3db when mag(V(BPF_OUT))=(tmp/sqrt(2))\n.MEAS AC meas_6db when mag(V(BPF_OUT))=(tmp/sqrt(2)/sqrt(2))
TEXT -312 -120 Left 2 ;RBP: 2k, RHP: 4k, RLP: 4k
TEXT -2680 520 Left 2 !;ac oct 20 10 10000
TEXT -1096 -512 Left 2 ;Note: RLP, RHP, and RBP are all 10 k pots controlling filter gain.
TEXT 56 120 Left 2 ;Rvol controls volume (10k pot), Rov throws it to 11.
