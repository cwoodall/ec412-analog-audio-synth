Version 4
SHEET 1 1204 680
WIRE 448 -336 352 -336
WIRE 560 -336 448 -336
WIRE 640 -336 560 -336
WIRE 672 -336 640 -336
WIRE 224 -304 224 -336
WIRE 672 -304 672 -336
WIRE 352 -288 352 -336
WIRE 560 -288 560 -336
WIRE 960 -288 928 -288
WIRE 224 -272 224 -304
WIRE 976 -240 976 -256
WIRE 816 -224 752 -224
WIRE 928 -224 928 -288
WIRE 928 -224 896 -224
WIRE 976 -224 976 -240
WIRE 640 -208 640 -336
WIRE 928 -208 928 -224
WIRE 944 -208 928 -208
WIRE 352 -192 352 -208
WIRE 752 -192 752 -224
WIRE 752 -192 352 -192
WIRE 1040 -192 1040 -288
WIRE 1040 -192 1008 -192
WIRE 1088 -192 1040 -192
WIRE 1120 -192 1088 -192
WIRE 944 -176 928 -176
WIRE 224 -160 224 -192
WIRE 560 -160 560 -208
WIRE 752 -160 560 -160
WIRE 352 -144 352 -192
WIRE 560 -144 560 -160
WIRE 752 -144 752 -160
WIRE 816 -144 752 -144
WIRE 928 -144 928 -176
WIRE 928 -144 896 -144
WIRE 976 -144 976 -160
WIRE 928 -128 928 -144
WIRE 288 -96 192 -96
WIRE 640 -96 640 -144
WIRE 640 -96 624 -96
WIRE 672 -96 672 -224
WIRE 672 -96 640 -96
WIRE 1120 -96 1120 -112
WIRE 192 -80 192 -96
WIRE 288 -64 288 -96
WIRE 304 -64 288 -64
WIRE 624 -64 624 -96
WIRE 624 -64 608 -64
WIRE 672 -64 672 -96
WIRE 640 -48 640 -96
WIRE 928 -32 928 -48
WIRE 1040 -32 928 -32
WIRE 352 -16 352 -48
WIRE 352 -16 336 -16
WIRE 448 -16 352 -16
WIRE 560 -16 560 -48
WIRE 560 -16 448 -16
WIRE 1040 -16 1040 -32
WIRE 192 16 192 0
WIRE 672 16 640 16
WIRE 672 32 672 16
WIRE 208 80 144 80
WIRE 928 80 928 48
WIRE 192 96 176 96
WIRE 1040 96 1040 64
WIRE 1072 96 1040 96
WIRE 1104 96 1072 96
WIRE 448 144 448 -16
WIRE 304 160 304 112
WIRE 160 176 144 176
WIRE 272 176 224 176
WIRE 160 192 160 176
WIRE 160 192 128 192
WIRE 240 192 160 192
WIRE 384 192 336 192
WIRE 160 208 160 192
WIRE 160 208 96 208
WIRE 240 208 240 192
WIRE 272 208 240 208
WIRE 384 224 384 192
WIRE 400 224 384 224
WIRE 96 240 96 208
WIRE 304 240 304 224
WIRE 448 240 336 240
WIRE 448 256 448 240
WIRE 512 256 448 256
WIRE 224 272 224 176
WIRE 240 272 224 272
WIRE 336 272 336 240
WIRE 336 272 320 272
WIRE 448 272 448 256
WIRE 96 352 96 320
WIRE 448 368 448 352
WIRE 512 368 512 320
WIRE 512 368 448 368
WIRE 448 384 448 368
FLAG 96 352 0
FLAG 448 384 0
FLAG 224 -160 0
FLAG 224 -304 VCC
FLAG 448 -336 VCC
FLAG 976 -240 VCC
FLAG 976 -144 0
FLAG 192 16 0
FLAG 672 32 0
FLAG 928 80 0
FLAG 1072 96 VCC
FLAG 1120 -96 0
FLAG 1088 -192 OUT
FLAG 96 208 Envelope
FLAG 192 -96 Input
FLAG 304 240 0
FLAG 304 112 VCC
DATAFLAG 560 -160 ""
SYMBOL voltage 96 224 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value PWL(0 0 1s 9)
SYMBOL voltage 224 -288 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 9V
SYMBOL res 912 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL res 944 -32 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL res 944 -272 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL res 800 -208 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R8
SYMATTR Value 100k
SYMBOL Opamps\\opamp2 976 -256 R0
SYMATTR InstName U2
SYMATTR Value LM358
SYMBOL voltage 192 -96 R0
SYMATTR InstName V3
SYMATTR Value PWL repeat for 1000 (+.1ms 4.4) (+.1ms 4.6) endrepeat
SYMBOL res 656 -80 R0
SYMATTR InstName R12
SYMATTR Value 47k
SYMBOL res 656 -320 R0
SYMATTR InstName R13
SYMATTR Value 47k
SYMBOL res 912 -48 R0
SYMATTR InstName R14
SYMATTR Value 100
SYMBOL res 1024 -32 R0
SYMATTR InstName R15
SYMATTR Value 100
SYMBOL res 1104 -208 R0
SYMATTR InstName R16
SYMATTR Value 100k
SYMBOL nmos 400 144 R0
SYMATTR InstName M1
SYMATTR Value MbreakND
SYMBOL nmos 304 -144 R0
SYMATTR InstName M2
SYMATTR Value MbreakND
SYMBOL nmos 608 -144 M0
SYMATTR InstName M3
SYMATTR Value MbreakND
SYMBOL Opamps\\opamp2 304 128 R0
SYMATTR InstName U1
SYMATTR Value LM358
SYMBOL res 336 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 336 -304 R0
SYMATTR InstName R2
SYMATTR Value 4.7k
SYMBOL res 544 -304 R0
SYMATTR InstName R3
SYMATTR Value 4.7k
SYMBOL cap 624 -208 R0
SYMATTR InstName C1
SYMATTR Value 10µF
SYMBOL cap 624 -48 R0
SYMATTR InstName C2
SYMATTR Value 10µF
SYMBOL diode 496 256 R0
SYMATTR InstName D1
SYMBOL res 432 256 R0
SYMATTR InstName R4
SYMATTR Value 470k
TEXT 584 144 Left 2 !.tran 1s
TEXT 688 56 Left 2 !.lib LM358.sub
TEXT 920 368 Left 2 !;op
TEXT 672 208 Left 2 !;tran 1s
TEXT -624 -368 Left 2 !;dc V3 0 9 .1
TEXT 584 256 Left 2 !;step V1 0 4.5 .5
TEXT -544 -216 Left 2 ;Use MPQ3904for NPNs
